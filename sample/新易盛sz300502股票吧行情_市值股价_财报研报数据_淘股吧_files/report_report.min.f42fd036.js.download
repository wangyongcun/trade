/*! _static 2025-08-07 */
function reportDomainpath(){return window.location.href.indexOf("/shuo")>-1?"/shuo":reportDomain+"/new/jubao"}function cancelUserSelect(a){if(!a)return!1;document.body.style.userSelect="none",document.body.style.webkitUserSelect="none",document.body.style.msUserSelect="none",document.body.style.mozUserSelect="none",a.style.userSelect="none",a.style.webkitUserSelect="none",a.style.msUserSelect="none",a.style.mozUserSelect="none"}function restoreUserSelect(a){if(!a)return!1;document.body.style.userSelect="text",document.body.style.webkitUserSelect="text",document.body.style.msUserSelect="text",document.body.style.mozUserSelect="text",a.style.userSelect="text",a.style.webkitUserSelect="text",a.style.msUserSelect="text",a.style.mozUserSelect="text"}function drag(){function a(a){var a=a||window.event;if(!f)return!1;0!==e.style.marginLeft&&(e.style.marginLeft=0),0!==e.style.marginTop&&(e.style.marginTop=0);var b=a.clientX-c,g=a.clientY-d;b<0?b=0:b>window.innerWidth-e.offsetWidth&&(b=window.innerWidth-e.offsetWidth),g<0?g=0:g>window.innerHeight-e.offsetHeight&&(g=window.innerHeight-e.offsetHeight),e.style.left=b+"px",e.style.top=g+"px"}var b=document.getElementById("idModalTitle");if(null!=b){var c,d,e=b.parentNode,f=!1;b.onmousedown=function(a){var a=a||window.event;f=!0,c=a.clientX-e.offsetLeft,d=a.clientY-e.offsetTop,cancelUserSelect(e)}}document.onmousemove=function(){var b=this,c=arguments;clearTimeout(a.timeoutId),a.timeoutId=setTimeout(function(){a.apply(b,c)},50)},document.onmouseup=function(a){if(!f)return!1;f=!1,restoreUserSelect(e)}}function setReport(a,b,c,d,e,f,g){""!=g&&null!=g&&(reportTitle=g),reportFlag=a;var h;1==a?(h=window.location.href.indexOf("/shuo")>-1?reportDomainpath()+"/searchJuBaoRight?shuoID="+b+"&shuoReplyID="+c+"&type="+d:reportDomainpath()+"/searchJuBaoRight?topicID="+b+"&replyID="+c+"&type="+d,$("#nowWord").text("0/200")):(h=reportDomainpath()+"/searchFeedBackRight",$("#nowWord").text("0/400")),$.ajax({url:h,type:"GET",dataType:"json",success:function(g){g.status?(reportTopicID=b,reportReplyID=c,reportType=d,reportReceID=e,reportReceName=g.dto.userName,reportPageNo=f,reportAuto(a),$("#idModal").show(),$(".report-subinfo-users img").attr("src","https://image.tgb.cn/img/"+g.dto.portrait+"_80wh.png"),$(".report-subinfo-users span").text(g.dto.userName),$(".report-subinfo-text").text(g.dto.subInfo)):showAlert(g.errorMessage)},error:function(a){showAlert("操作失败!")}})}function reportAuto(a){$(".ReasonItem").removeClass("ngbRadioChoose"),$(".ReasonItem").eq(0).addClass("ngbRadioChoose"),$("#report-reason").val("1"),evidenceArr=[],madeEvidences(),1==a?($(".report-reasons").show(),$("#other-report").hide(),$(".report-subjectName").show(),$("#idModalTitle span").text("举报"),$(".report-subinfo").show(),$(".report-subinfo2").hide()):($(".report-reasons").hide(),$("#other-report").show(),$(".report-subjectName").hide(),$("#idModalTitle span").text("意见反馈"),$(".report-subinfo").hide(),$(".report-subinfo2").show())}function Cancelreport(){reportAuto(1),$("#other-report-text").val(""),$("#idModal").hide()}function Confirmreport(){if("false"==repeatSubmitstatus)return void showAlert("正在提交中，请勿重复提交。。。");var a=Number($("#report-reason").val()),b=$(".ngbRadioChoose").find(".radioText").text(),c=$("#other-report-text").val();return 0==String(c).trim().length?($(".report-reasons").hide(),void $("#other-report").show()):2==reportFlag&&0==String(c).trim().length?void showAlert("请填写举报描述!"):void confirm(1==reportFlag?"确定要提交举报吗?":"确定要提交意见反馈吗?",function(d){if(1==d){var e,f,g;try{"T"==reportType?reportTitle=topicSubject:"R"==reportType?reportTitle=document.getElementById("reply"+reportReplyID).innerText:"W"!=reportType&&"WR"!=reportType||(reportTitle=document.getElementsByClassName("report-subinfo-text")[0].innerText)}catch(j){}if(1==reportFlag)e=reportDomainpath()+"/sendJuBao",f={type:reportType,topicID:reportTopicID,replyID:reportReplyID,reason:a,image:JSON.stringify(evidenceArr),describe:c,pageNo:reportPageNo,receUserID:reportReceID,title:reportTitle},g={type:reportType,shuoID:reportTopicID,shuoReplyID:reportReplyID,reason:a,image:JSON.stringify(evidenceArr),describe:c,pageNo:reportPageNo,receUserID:reportReceID,title:reportTitle};else{e=reportDomainpath()+"/sendFeedBack";for(var h=c,i=0;i<evidenceArr.length;i++)h+="[img].."+evidenceArr[i]+"[/img]";f={sendBody:h},g={sendBody:h}}repeatSubmitstatus="false",$.ajax({url:e,type:"POST",data:window.location.href.indexOf("/shuo")>-1?g:f,dataType:"json",success:function(a){a.status?(showAlert(1==reportFlag?"提交举报成功!":"提交意见反馈成功"),reportAuto(reportFlag),Cancelreport(),1==reportFlag&&$.ajax({type:"GET",url:"/user/getUserTopic",data:{type:reportType,topicID:reportTopicID,replyID:reportReplyID,userID:reportReceID},dataType:"json",success:function(a){var c="",d="";a.status&&(a.dto.subject&&null!=a.dto.subject&&(c="R"==reportType||"WR"==reportType?a.dto.content:a.dto.subject),d=a.dto.auth&&null!=a.dto.auth&&""!=a.dto.auth&&Number(a.dto.auth)>54?"是":"否");var e={};"T"==reportType?(e.content_id_var=reportTopicID,e.contentType_var=$(".classify").text()):"R"==reportType?(e.content_id_var=reportReplyID,e.contentType_var="跟帖"):"W"==reportType?(e.content_id_var=reportTopicID,e.contentType_var="说说"):"WR"==reportType?(e.content_id_var=reportReplyID,e.contentType_var="说说回复"):(e.content_id_var=reportTopicID,e.contentType_var="-"),e.contentTitle_var=c,e.reportReason_var=b,e.creator_id_var=reportReceID,e.creatorName_var=reportReceName,e.ifBigV_var=d,gioMessage("reportSuccess",e)}})):1==a.errorCode?showAlert("请勿重复举报!"):showAlert(1==reportFlag?"提交举报失败!":"提交意见反馈失败！"),repeatSubmitstatus="true"},error:function(a){showAlert(1==reportFlag?"提交举报失败!":"提交意见反馈失败！"),repeatSubmitstatus="true"}})}})}function otherReports(){window.open().location.href=reportDomain+"/new/jubao/toTortGuidePage"}function deleteEvidence(a){evidenceArr.splice(a,1),madeEvidences()}function madeEvidences(){for(var a="",b=0;b<evidenceArr.length;b++)a+='<div class="evidence-images-item left">',a+='<img src="https://image.tgb.cn'+evidenceArr[b]+'_760w.png" alt="">',a+='<div class="evidence-image-close" onclick="deleteEvidence('+b+')"></div>',a+="</div>";a+='<div class="clear"></div>',evidenceArr.length>0?($(".evidence-images").html(a),$(".evidence-image-length span").text(evidenceArr.length)):$(".evidence-images").html("")}function uploadImgages(){if(4==evidenceArr.length)return void showAlert("截图上传已达上限");var a=new FormData,b=new FileReader,c=document.getElementById("imgFile").files[0],d=c.name;b.readAsDataURL(c),b.onloadend=function(){var c=b.result;a.append("newFile",c),a.append("fileFileName",d),a.append("fileName",d);var e;e=window.location.href.indexOf("jr.tgb")>-1?"/sm/upEditFileNew":window.location.href.indexOf("shuo.tgb")>-1?"/shuo/upEditFileNew":"/user/upEditFile1New",$.ajax({url:e,type:"post",data:a,processData:!1,contentType:!1,success:function(a){isUpload="true",1==a.status||"true"==a.status?(evidenceArr.push(a.dto),alert("上传图片成功!"),madeEvidences()):0!=a.status&&"false"!=a.status||alert(a.errorMessage)},error:function(a){showAlert("上传图片失败")}})}}var reportDomain="https://"+window.location.host.replace("jr.","www.").replace("shuo.","www."),reportFlag=1,repeatSubmitstatus="true";drag();var reportTopicID=0,reportReplyID=0,reportType,reportReceID="",reportReceName="",reportPageNo=1,isUpload="false",evidenceArr=[],reportTitle="";$(".report-reasons .ReasonItem").bind("click",function(){var a=$(this).attr("data-value");$("#report-reason").val(a),$(".ReasonItem").removeClass("ngbRadioChoose"),$(this).addClass("ngbRadioChoose")}),$("#other-report-text").bind("input propertychange",function(){var a=$(this).val();1==reportFlag?a.length>200?($(this).val(a.substring(0,200)),$("#nowWord").text("200/200")):$("#nowWord").text(a.length+"/200"):a.length>400?($(this).val(a.substring(0,400)),$("#nowWord").text("400/400")):$("#nowWord").text(a.length+"/400")});