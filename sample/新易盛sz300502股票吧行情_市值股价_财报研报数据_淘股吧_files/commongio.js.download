var gioAccountID = "9d8b12c9824d045a";var gioDatasourceID = "b00208abd16f075e"; //测试var gioHost = "cj.taoguba.test";var giodomain = "test";var urlPath = window.location.href;if(urlPath.indexOf("tgb.cn") != -1){ //正式    gioAccountID = "893eedf422617c96";    gioDatasourceID = "8db777366e12d677";    gioHost = "cj.tgb.cn";    giodomain = "cn";}var gioVersion = "1.0.0";var wwwDomain = 'https://' + ((window.location.host).replace('jr.', 'www.')).replace('shuo.', 'www.').replace('m.', 'www.');//gio发送消息 -- startfunction gioMessage(actionName, body){    gdp('track', actionName, body);}//gio发送消息 -- endvar GIOSHIJIAN={    "moduleView":"moduleView",    "moduleClick":"moduleClick",    "mainPageView":"mainPageView",    "consumedSuccess":"consumedSuccess",    "perfectDiscussPageView":"perfectDiscussPageView",    "discussPageView":"discussPageView",    "newsFlashPageView":"newsFlashPageView",    "leaveReplySuccess":"leaveReplySuccess",    "vIdeoPageView":"videoPageView",    "shuoPageView":"shuoPageView",    "infoPageView":"infoPageView",    "individualSharesView":"individualSharesView",    "authenticationSuccess":"authenticationSuccess",    "payClick":"payClick",    "buyButtonClick":"buyButtonClick",    "rechargeIntegralView":"rechargeIntegralView",    "cancelFollowSuccess":"cancelFollowSuccess",    "releaseInformationSuccess":"releaseInformationSuccess",    "payButtonClick":"payButtonClick",    "clickButtonSubscribe":"clickButtonSubscribe",    "searchGamePageSuccess":"searchGamePageSuccess",    "selectStoctPageView":"selectStoctPageView",    "directSearchSuccess":"directSearchSuccess",    "SearchResultsClick":"SearchResultsClick",    "selectStoctView":"selectStoctView",    "comeOnButtonClick":"comeOnButtonClick",    "releaseComeOnButtonClick":"releaseComeOnButtonClick",    "researchPageView":"researchPageView",    "releaseContentClick":"releaseContentClick",    "followSuccess":"followSuccess",    "collectSuccess":"collectSuccess",    "commentSuccess":"commentSuccess",    "likeSuccess":"likeSuccess",    "releaseButtonClick":"releaseButtonClick",    "strategyAuthenticationSuccess":"strategyAuthenticationSuccess",    "strategyClearanceAgreementSuccess":"strategyClearanceAgreementSuccess",    "selectStrategyView":"selectStrategyView",    "selectStrategyPageView":"selectStrategyPageView",    "searchSuccess":"searchSuccess",    "searchResultsClick":"searchResultsClick",    "loginSuccess":"loginSuccess",    "bondPageView":"bondPageView",    "strategyPayButtonClick":"strategyPayButtonClick",    "strategyClickButtonSubscribe":"strategyClickButtonSubscribe",    "addNominattion":"addNominattion",    "nominateSuccess":"nominateSuccess",    "rankingPageView":"rankingPageView",    "nominatePageView":"nominatePageView",    "blogView":"blogView",    "votePageView":"votePageView",    "voteSuccess":"voteSuccess",    "applyGameSuccess":"applyGameSuccess",    "researchPlayerDetailView":"researchPlayerDetailView",    "coursePageView":"coursePageView",    "courseIntroductionView":"courseIntroductionView",    "courseChapterView":"courseChapterView",    "courseClickButtonSubscribe":"courseClickButtonSubscribe",    "courseAuthenticationSuccess":"courseAuthenticationSuccess",    "userLabelScreenView":"userLabelScreenView",    "taskReceiveReward":"taskReceiveReward",    "pushLiveButtonClick":"pushLiveButtonClick",    "redPocketClick":"redPocketClick",    "speedReportClick":"speedReportClick",    "completePictureRecognition":"completePictureRecognition",    "confirmSubmissionReport":"confirmSubmissionReport",    "stockEntryWarning":"stockEntryWarning",    "submitWarningForm":"submitWarningForm",    "integralUnlockClick":"integralUnlockClick",    "personalColumnsPageView":"personalColumnsPageView",    "trainingContentyView":"trainingContentyView",    "trainingClickButtonSubscribe":"trainingClickButtonSubscribe",    "trainingAuthenticationSuccess":"trainingAuthenticationSuccess",    "trainingClearanceAgreementSuccess":"trainingClearanceAgreementSuccess",    "trainingPayButtonClick":"trainingPayButtonClick",    "selectionPageView":"selectionPageView",    "Voicemeeter":"Voicemeeter",    "hotStockUnlockClick":"hotStockUnlockClick",    "integralUnlockClick":"integralUnlockClick",    "gamePlayerPageView":"gamePlayerPageView",}var GIOSHUXING={    "firstModuleName_var":"firstModuleName_var",    "content_id_var":"content_id_var",    "ifRecommend_var":"ifRecommend_var",    "sndModuleName_var":"sndModuleName_var",    "thirdModuleName_var":"thirdModuleName_var",    "position_var":"position_var",    "positonName_var":"positonName_var",    "contentType_var":"contentType_var",    "level_var":"level_var",    "creator_id_var":"creator_id_var",    "watchTime_var":"watchTime_var",    "creatorName_var":"creatorName_var",     "contentTitle_var":"contentTitle_var",    "entryPage_var":"entryPage_var",    "entryFunction_var":"entryFunction_var",    "shares_id_var":"shares_id_var",    "sharesrName_var":"sharesrName_var",    "payType_var":"payType_var",    "money_amount_var":"money_amount_var",    "businessType_var":"businessType_var",    "buyType_var":"buyType_var",    "ifSearchResult_var":"ifSearchResult_var",    "searchWord_var":"searchWord_var",    "submenurName_var":"submenurName_var",    "ifBigV_var" :"ifBigV_var",    "userLevel_var":"userLevel_var",    "host_var":"host_var",    "searchType_var":"searchType_var",    "userStatus_var":"userStatus_var",    "followTime_var":"followTime_var",    "comeOn_num_var":"comeOn_num_var",    "integral_num_var":"integral_num_var",    "releaseType_var":"releaseType_var",    "releaseStatus_var":"releaseStatus_var",    "releaseFailReason_var":"releaseFailReason_var",    "shares_num_var":"shares_num_var",    "ifValid_var":"ifValid_var",    "publishMethod_var":"publishMethod_var",    "likeEntry_var":"likeEntry_var",    "discuss_id_var":"discuss_id_var",    "discuss_title_var":"discuss_title_var",    "discussCreator_id_var":"discussCreator_id_var",    "discussCreator_name_var":"discussCreator_name_var",    "registerType_var":"registerType_var",    "ifFirstLogin_var":"ifFirstLogin_var",    "subscribeType_var":"subscribeType_var",    "nominateNumber_var":"nominateNumber_var",    "recommendType_var":"recommendType_var",    "topicPageType_var":"topicPageType_var",    "talkName_var":"talkName_var",    "userLabelName_var":"userLabelName_var",    "taskName_var":"taskName_var",    "taskRewardTpye_var":"taskRewardTpye_var",    "taskReceiveTpye_var":"taskReceiveTpye_var",    "ifReceiveSuccee_var":"ifReceiveSuccee_var",    "receiveFailReason_var":"receiveFailReason_var",    "redPocketType_var":"redPocketType_var",    "pictureRecognitionResult_var":"pictureRecognitionResult_var",    "totalAssets_var":"totalAssets_var",    "stockPosition_var":"stockPosition_var",    "openStock_var":"openStock_var",    "stockYield_var":"stockYield_var",    "totalAssetsToday_var":"totalAssetsToday_var",    "totalAssetesYesterday_var":"totalAssetesYesterday_var",    "typeOfOperation_var":"typeOfOperation_var",    "user_id_var":"user_id_var"}/**判断是否为空 */function isEmptyGio(obj) {    if (typeof obj == "undefined" || obj == null || obj == "") {        return true;    } else {        return false;    }}/** * 获取参数 * @param name * @returns {string} */function getQueryStringUrl(name,url) {    var reg = new RegExp("(^|&|#)" + name + "=([^&]*)(&|$)", "i");    var r = url.substr(1).match(reg); //获取url中"?"符后的字符串并正则匹配    var context = "";    if (r != null)        context = r[2]    reg = null;    r = null;    return context == null || context == "" || context == "undefined" ? "" : context;}//上一页面名称function getReferrerName() {    var ref = document.referrer;    return urlPageName(ref)}function urlPageName(ref) {    var source = '-';    if (ref.indexOf("/a") > -1) {        source = '主帖页';    }    if (ref.indexOf("/a/") > -1) {        source = '主帖页';    }    if (ref.indexOf("/new/nrnt/listResearchUserList") > -1) {        source = '比赛收益达人详情页';    }    if (ref.indexOf("/new/nrnt/contestAttended") > -1) {        source = '个人博客研股栏目';    }    if (ref.indexOf("/bbs/") > -1){        source = '论坛首页';    }    if (ref.indexOf("/video/listShuoVideo") > -1) {        source = '视频列表页';    }    if (ref.indexOf("/blog") > -1){        source = '个人博客';    }    if (ref.indexOf("/follow/") > -1){        source = '精彩跟帖页';    }    if (ref.indexOf("/dialog/") > -1){        source = '跟帖讨论页';    }    if (ref.indexOf("/shuo/shuoindex") > -1){        source = '说说首页';    }    if (ref.indexOf("/shuo/toViewShuo") > -1){        source = '说说页';    }    if (ref.indexOf("/oil/buyGold") > -1){        source = '我的加油券页';    }    if (ref.indexOf("/spmatch/message") > -1){        source = '消息中心';    }    if (ref.indexOf("/user/getMoreListAction") > -1){        source = '关注动态';    }    if (ref.indexOf("/ngb/toNgbList") > -1){        source = '牛股宝栏目';    }    if (ref.indexOf("/search/hotPop") > -1){        source = '搜索页';    }    if (ref.indexOf("/quotes/") > -1){        source = '个股吧';        if(window.location.href.endsWith("ref=quote")){            source = '新增挖掘达人';        }        if (ref.endsWith("/quotes/")){            source = '行情中心';        }    }    if (ref.indexOf("/getNewDavViewPoint") > -1){        source = '智能选股栏目';    }    if (ref.indexOf("/getSelfInfo")>-1){        source = "个人中心"    }    if (ref.indexOf("/moreStockInfo")>-1){        source = "我的股票"    }    if (ref == "https://www.tgb.cn/" || ref == "https://www.tgb.cn/newIndex/"){        source = '首页';    }    if (ref.indexOf("/talkSeq")>-1){        source = '话题页';    }    if (ref.indexOf("/weblive/liveList") > -1){        source = '直播回放列表';    }    if (ref.indexOf("/weblive/toPlaybackView") > -1){        source = '观看记录';    }    if (ref.indexOf("/shuo/toBlogShuo") > -1){        source = '个人博客';    }    if (ref.indexOf("/nrnt/listResearchMatch") > -1){        source = '研股比赛列表';    }    if (ref.indexOf("/nrnt/toPopularityBoard") > -1){        source = '研股人气榜';    }    if (ref.indexOf("/researchUserMsg") > -1){        source = '选手详情页';    }    if (ref.indexOf("/researchLuo") > -1){        source = '研股风云榜';    }    if (ref.indexOf("/researchJiao") > -1){        source = '研股风云榜';    }    if (ref.indexOf("/feeds/gold/blogUserColumn") > -1){        source = '个人专栏';    }    if (ref.indexOf("/trainCamp/toTrainCampPointView") > -1){        source = '训练营列表';    }    if (ref.indexOf("/trainCamp/getBuyTrainCampPointView") > -1){        source = '我的订阅';    }    return source;}//当前页面function getCurrentName() {    return urlPageName(window.location.href);}function gioPayClick(contentID,rType,money,payType,businessType,buyType,feedsType){    var body = getGioPayClickBody(contentID,rType,money,payType,businessType,buyType,feedsType)    gioMessage(GIOSHIJIAN.payClick, body)}//训练营个人专栏购买function gioPayClickTrain(seq,payType,moneyCount){    if (payType == "W"){        payType = "微信"    }else if (payType == "Z" || payType == "T"){        payType = "支付宝"    }else {        payType = "-";    }    var body = {};    var cl = ".gioViewTrain_"+seq;    var contentTitle = "-";    var creatorID = "-";    var creator = "-";    var money =  "-";    var contentID = "-";    var userID = $("#userID").val();    creatorID = $(cl).attr("data-userID");    creator = $(cl).attr("data-userName");    contentTitle = $(cl).attr("data-title");    money = moneyCount;    contentID = seq;    body[GIOSHUXING.creator_id_var]=creatorID;    body[GIOSHUXING.creatorName_var]=creator;    body[GIOSHUXING.content_id_var]=contentID;    body[GIOSHUXING.contentTitle_var]=contentTitle;    body[GIOSHUXING.money_amount_var]=money;    body[GIOSHUXING.contentType_var]="训练营";    body[GIOSHUXING.buyType_var]="-";    body[GIOSHUXING.businessType_var]="训练营";    body[GIOSHUXING.payType_var]=payType;    body[GIOSHUXING.creatorName_var]=creator;    gioMessage(GIOSHIJIAN.payClick,body);}//策略橱窗购买埋点function gioClickWindowToBuy(feedsID, liveUserID, liveUserName, loginUserID, feedsTitle, money,businessType){    var body = {};    body.creator_id_var = liveUserID;    body.creatorName_var = liveUserName;    body.content_id_var = feedsID;    body.contentTitle_var = feedsTitle;    var data = getFansLevel(liveUserID, loginUserID);    var fansLevel = data.fansRankName;    var fansTime = data.followTime;    if(businessType == "CL"){        body.businessType_var = "策略参考";    }else if(businessType == "KC"){        body.businessType_var = "课程";    }else {        body.businessType_var = "训练营";    }    if(fansLevel == "-"){        body.userStatus_var = "非粉丝";        body.followTime_var = "-"        body.userLevel_var = "-";    }else{        body.userStatus_var= "粉丝";        body.followTime_var = fansTime;        body.userLevel_var = fansLevel;    }    body.subscribeType_var = "付费订阅";    body.money_amount_var = money;    gioMessage("clickWindowToBuy", body);}function gioStrategyPayButtonClick(contentID,money,paytype,userID){    var body =getGioStrategyPayButtonClickBody(contentID,money,paytype,userID);    gioMessage(GIOSHIJIAN.strategyPayButtonClick, body);}function getGioStrategyPayButtonClickBody(contentID,money,paytype,userID){    var creatorID = "-";    var creatorName = "-";    var contentID = contentID;    var contentTitle = "-";    creatorID = $('.stockviewgio').attr("data-feedsid");    creatorName = $('.stockviewgio').attr("data-feedsname");    contentTitle = $('.stockviewgio').attr("data-title");    var body={}    //粉丝    if (paytype == "W"){        payType = "微信";        body[GIOSHUXING.subscribeType_var] = "付费订阅";    }else if (paytype == "Z" || paytype == "T"){        payType = "支付宝";        body[GIOSHUXING.subscribeType_var] = "付费订阅";    }else if(paytype=="F"){        payType = "-";        body[GIOSHUXING.subscribeType_var] = "免费订阅";    }    var data = getFansLevel(creatorID, userID);    var fansLevel = data.fansRankName;    var fansTime = data.followTime;    if(fansLevel == "-"){        body[GIOSHUXING.userStatus_var] = "非粉丝";        body[GIOSHUXING.followTime_var] = "-"        body[GIOSHUXING.userLevel_var] = "-";    }else{        body[GIOSHUXING.userStatus_var] = "粉丝";        body[GIOSHUXING.followTime_var] = fansTime;        body[GIOSHUXING.userLevel_var] = fansLevel;    }    body[GIOSHUXING.creator_id_var] = userID;    body[GIOSHUXING.content_id_var] = contentID;    body[GIOSHUXING.creatorName_var] = creatorName;    body[GIOSHUXING.money_amount_var]=money;    body[GIOSHUXING.contentTitle_var]=contentTitle;    body[GIOSHUXING.payType_var]=payType;    return body;}function getGioPayClickBody(contentID,rType,money,payType,businessType,buyType,feedsType){    if (payType == "W"){        payType = "微信"    }else if (payType == "Z" || payType == "T"){        payType = "支付宝"    }else {        payType = "-";    }    var contentID = contentID;    var contentTitle = "-";    var body = getContentBody(rType,contentID)    if("Y" == feedsType){        body[GIOSHUXING.contentType_var] = "金策";    }    contentTitle = body[GIOSHUXING.contentTitle_var];    var buyType_var = "-";    if (rType == "CLS"){        buyType_var = "单篇购买";        if (buyType == 1){            buyType_var = "一个月";        }        if (buyType == 3){            buyType_var = "三个月";        }        if (buyType == 6){            buyType_var = "六个月";        }        if (buyType == 12){            buyType_var = "十二个月";        }    }    if (rType== "S" || rType == "R" ||rType == "T"){        contentTitle = contentTitle.replace(/<[^<>]+>/g,"").replace("[淘股吧]","").replace(/(^\s*)|(\s*$)/g, "");        contentTitle = contentTitle.replace("[gubar]","").replace("[/gubar]","");        if (contentTitle.length >50){            contentTitle = contentTitle.substring(0,50);        }    }    body[GIOSHUXING.contentTitle_var]=contentTitle;    body[GIOSHUXING.payType_var]=payType;    body[GIOSHUXING.money_amount_var]=money;    body[GIOSHUXING.businessType_var]=businessType;    body[GIOSHUXING.buyType_var]=buyType_var;    return body;}function gioBuyButtonClick(money){    var body={}    if (money != 10 && money != 50 && money != 100 && money != 500 && money != 1000 ){        money = "其他"    }    body[GIOSHUXING.money_amount_var]=money;    gioMessage(GIOSHIJIAN.buyButtonClick, body)}function gioRechargeIntegralView(){    var body={}    body[GIOSHUXING.entryPage_var]=getReferrerName();    body[GIOSHUXING.entryFunction_var]="充值积分";    gioMessage(GIOSHIJIAN.rechargeIntegralView, body);}function gioReleaseInformationSuccess(ids){    var arr = ids.split(",");    for (var i = 0; i < arr.length; i++) {        var id = "#gioSp_"+arr[i];        var body={}        body[GIOSHUXING.content_id_var]=arr[i];        body[GIOSHUXING.contentTitle_var]=$(id).attr('data-title');        body[GIOSHUXING.host_var]=$(id).attr('data-username');        gioMessage(GIOSHIJIAN.releaseInformationSuccess, body)    }}function researchPageViewColumn(){    var body = {}    body[GIOSHUXING.entryPage_var] = "首页";    body[GIOSHUXING.entryFunction_var] = "研股栏目";    gioMessage(GIOSHIJIAN.researchPageView , body);}function researchPageViewHead(){    var body = {}    body[GIOSHUXING.entryPage_var] = "导航栏";    body[GIOSHUXING.entryFunction_var] = "头部导航";    gioMessage(GIOSHIJIAN.researchPageView , body);}function getFansLevel(userId,fansID){    var data = {"fansLevel": "-", "followTime": "-", "fansRankName": "-"};    var fansLevel = "-";    $.ajax({        type:'get',        url: "/user/getFansLevel",        async: false,        data:{"userID":userId,"fansID":fansID},        dataType: 'json',        success:function (res){            if(res.status){                data = res.dto;                if (res.dto.fansLevel == "Lv1"){                    fansLevel = "普通粉丝";                }else if (res.dto.fansLevel == "Lv2"){                    fansLevel = "银粉";                }else if (res.dto.fansLevel == "Lv3"){                    fansLevel = "金粉";                }else {                    fansLevel = "-";                }                data.fansRankName = fansLevel;            }        }    });    return data;}//Gio 取消关注事件埋点function gioCancelFollowSuccess(userID,userName,isDav,fansLevel){    var body={}    body[GIOSHUXING.creator_id_var]=userID;    body[GIOSHUXING.creatorName_var]=userName;    body[GIOSHUXING.ifBigV_var]=isDav;    body[GIOSHUXING.userLevel_var]=fansLevel;    gioMessage(GIOSHIJIAN.cancelFollowSuccess,body)}//策略参考身份认证giofunction gioStrategyAuthenticationSuccess(contentID,money,userID,type) {    var contentTitle = "-";    var creatorID = "-";    var creatorName = "-";    var contentID = contentID;    creatorID = $('.stockviewgio').attr("data-feedsid");    creatorName = $('.stockviewgio').attr("data-feedsname");    contentTitle = $('.stockviewgio').attr("data-title");    var body={}    //粉丝    var data = getFansLevel(creatorID, userID);    var fansLevel = data.fansRankName;    var fansTime = data.followTime;    if(fansLevel == "-"){        body[GIOSHUXING.userStatus_var] = "非粉丝";        body[GIOSHUXING.followTime_var] = "-"        body[GIOSHUXING.userLevel_var] = "-";    }else{        body[GIOSHUXING.userStatus_var] = "粉丝";        body[GIOSHUXING.followTime_var] = fansTime;        body[GIOSHUXING.userLevel_var] = fansLevel;    }    body[GIOSHUXING.creator_id_var]=creatorID;    body[GIOSHUXING.creatorName_var]=creatorName;    body[GIOSHUXING.content_id_var]=contentID;    body[GIOSHUXING.contentTitle_var]=contentTitle;    body[GIOSHUXING.money_amount_var]=money;    if (type == 'Y'){        body[GIOSHUXING.subscribeType_var]="付费订阅";    }else if (type == 'F'){        body[GIOSHUXING.subscribeType_var]="免费订阅";    }    gioMessage(GIOSHIJIAN.strategyAuthenticationSuccess,body);}//M端取消关注giofunction gioCancelFollow(userID,username,loginUserID) {    var userName = username;    var creatorID = userID;    var fansID = loginUserID;    var body={}    //粉丝    var data = getFansLevel(creatorID, fansID);    var fansLevel = data.fansRankName;    var fansTime = data.followTime;    if(fansLevel == "-"){        body[GIOSHUXING.userStatus_var] = "非粉丝";        body[GIOSHUXING.followTime_var] = "-"        body[GIOSHUXING.userLevel_var] = "-";    }else{        body[GIOSHUXING.userStatus_var] = "粉丝";        body[GIOSHUXING.followTime_var] = fansTime;        body[GIOSHUXING.userLevel_var] = fansLevel;    }    body[GIOSHUXING.creator_id_var]=creatorID;    body[GIOSHUXING.creatorName_var]=userName;    gioMessage(GIOSHIJIAN.cancelFollowSuccess,body);}//Dv,Ngb身份认证giofunction gioAuthenticationSuccess(contentID,money,type,userID) {    var contentTitle = "-";    var creatorID = "-";    var creatorName = "-";    var contentID = contentID;    if (type =='DV'){        creatorID = $('.payMore').attr("data-userid");        creatorName = $('.payMore').attr('data-username');        contentTitle = $('.payMore').attr('data-title');    }else if (type == 'NGB'){        creatorID = $('.ngbBuy').attr("data-userid");        creatorName = $('.ngbBuy').attr('data-username');        contentTitle = '精选·' + creatorName + '(' + $('.ngbBuy').attr('data-period') + ')';    }    var body={}    body[GIOSHUXING.creator_id_var]=creatorID;    body[GIOSHUXING.creatorName_var]=creatorName;    body[GIOSHUXING.content_id_var]=contentID;    body[GIOSHUXING.contentTitle_var]=contentTitle;    body[GIOSHUXING.money_amount_var]=money;    //粉丝    var data = getFansLevel(creatorID, userID);    var fansLevel = data.fansRankName;    var fansTime = data.followTime;    if(fansLevel == "-"){        body[GIOSHUXING.userStatus_var] = "非粉丝";        body[GIOSHUXING.followTime_var] = "-"        body[GIOSHUXING.userLevel_var] = "-";    }else{        body[GIOSHUXING.userStatus_var] = "粉丝";        body[GIOSHUXING.followTime_var] = fansTime;        body[GIOSHUXING.userLevel_var] = fansLevel;    }    gioMessage(GIOSHIJIAN.authenticationSuccess,body);}//策略参考订阅协议确定成功giofunction gioStrategyClearanceAgreementSuccess(type){    var contID = $('.stockviewgio').attr("data-contid");    var authorUserID = $('.stockviewgio').attr("data-userid");    var creatorID = $('.stockviewgio').attr("data-feedsid");    var userID = $('.stockviewgio').attr("data-userid");    var body = {}    body.creator_id_var = userID;    body.creatorName_var = $('.stockviewgio').attr("data-feedsname");    body.content_id_var = contID;    body.contentTitle_var = $('.stockviewgio').attr("data-title");    var data = getFansLevel(creatorID,userID);    var fansLevel = data.fansRankName;    var fansTime = data.followTime;    if(fansLevel == "-"){        body.userStatus_var = "非粉丝";        body.followTime_var = "-"        body.userLevel_var = "-";    }else{        body.userStatus_var= "粉丝";        body.followTime_var = fansTime;        body.userLevel_var = fansLevel;    }    if (type == 'F'){        body.subscribeType_var = "免费订阅"        body.money_amount_var = 0;    }else if(type == 'Y'){        body.subscribeType_var = "付费订阅";        body.money_amount_var = $('.stockviewgio').attr("data-money");    }else {        body.subscribeType_var = "-"    }    gioMessage(GIOSHIJIAN.strategyClearanceAgreementSuccess,body);}function gioPayButtonClick(contentID,money,payType,userID,type) {    var contentTitle = "-";    var creatorID = "-";    var creatorName = "-";    if (payType == "W"){        payType = "微信"    }else {        payType = "支付宝"    }    var contentID = contentID;    if (type =='DV'){        creatorID = $('.payMore').attr("data-userid");        creatorName = $('.payMore').attr('data-username');        contentTitle = $('.payMore').attr('data-title');    }else if (type == 'NGB'){        creatorID = $('.ngbBuy').attr("data-userid");        creatorName = $('.ngbBuy').attr('data-username');        contentTitle = '精选 · ' + creatorName+' '+$('.ngbBuy').attr('data-time')+ '(' + $('.ngbBuy').attr('data-period') + ')';    }    var body={}    body[GIOSHUXING.creator_id_var]=creatorID;    body[GIOSHUXING.creatorName_var]=creatorName;    body[GIOSHUXING.content_id_var]=contentID;    body[GIOSHUXING.contentTitle_var]=contentTitle;    body[GIOSHUXING.money_amount_var]=money;    body[GIOSHUXING.payType_var]=payType;    //粉丝    var data = getFansLevel(creatorID, userID);    var fansLevel = data.fansRankName;    var fansTime = data.followTime;    if(fansLevel == "-"){        body[GIOSHUXING.userStatus_var] = "非粉丝";        body[GIOSHUXING.followTime_var] = "-"        body[GIOSHUXING.userLevel_var] = "-";    }else{        body[GIOSHUXING.userStatus_var] = "粉丝";        body[GIOSHUXING.followTime_var] = fansTime;        body[GIOSHUXING.userLevel_var] = fansLevel;    }    gioMessage(GIOSHIJIAN.payButtonClick,body);}function gioClickButtonSubscribe(contentID,money,type,userID) {    var contentTitle = "-";    var creatorID = "-";    var creatorName = "-";    var contentID = contentID;    if (type =='DV'){        creatorID = $('.payMore').attr("data-userid");        creatorName = $('.payMore').attr('data-username');        contentTitle = $('.payMore').attr('data-title');    }else if (type == 'NGB'){        creatorID = $('.ngbBuy').attr("data-userid");        creatorName = $('.ngbBuy').attr('data-username');        contentTitle = '精选 · ' + creatorName+' '+$('.ngbBuy').attr('data-time')+ '(' + $('.ngbBuy').attr('data-period') + ')';    }    var body={}    body[GIOSHUXING.creator_id_var]=creatorID;    body[GIOSHUXING.creatorName_var]=creatorName;    body[GIOSHUXING.content_id_var]=contentID;    body[GIOSHUXING.contentTitle_var]=contentTitle;    body[GIOSHUXING.money_amount_var]=money;    //粉丝    var data = getFansLevel(creatorID, userID);    var fansLevel = data.fansRankName;    var fansTime = data.followTime;    if(fansLevel == "-"){        body[GIOSHUXING.userStatus_var] = "非粉丝";        body[GIOSHUXING.followTime_var] = "-"        body[GIOSHUXING.userLevel_var] = "-";    }else{        body[GIOSHUXING.userStatus_var] = "粉丝";        body[GIOSHUXING.followTime_var] = fansTime;        body[GIOSHUXING.userLevel_var] = fansLevel;    }    gioMessage(GIOSHIJIAN.clickButtonSubscribe,body);}function gioSearchGamePageSuccess(searchWord,resultVar) {    var result = "-";    if (resultVar == 'Y'){        result = "有";    }else {        result = "否";    }    var body = {}    body[GIOSHUXING.ifSearchResult_var]=result;    body[GIOSHUXING.searchWord_var]=searchWord;    gioMessage(GIOSHIJIAN.searchGamePageSuccess,body);}function gioDirectSearchSuccess(resultVar,type,searchWord) {    var result = "-";    var searchType = "-"    if(resultVar == 'Y'){        result = "有";    }else {        result = "否";    }    if (type == 1){        searchType = "主动搜索";    }else if(type == 2){        searchType = "联想词搜索";    }else if(type == 3){        searchType = "历史搜索";    }    var body={}    body[GIOSHUXING.ifSearchResult_var] = result;    body[GIOSHUXING.searchWord_var] = searchWord;    body[GIOSHUXING.searchType_var] = searchType;    gioMessage(GIOSHIJIAN.directSearchSuccess,body);}function gioSearchResultsClick(searchWord,searchType,title,contentType) {    var searchTypeGio = '-';    if (searchType == '1'){        searchTypeGio = "直接搜索";    }else if (searchType == '2'){        searchTypeGio = "搜索热度";    }else if (searchType == '3'){        searchTypeGio = "高级搜索";    }    var contentTypeGio = '-';    if (contentType == 0){        contentTypeGio = "讨论";    }else if (contentType == 2){        contentTypeGio = "股票";    }else if (contentType == 1){        contentTypeGio = "用户";    }else if (contentType == 5){        contentTypeGio = "基金"    }else if (contentType == 3){        contentTypeGio = '热度搜索';    }    var body={}    body[GIOSHUXING.searchWord_var] = searchWord;    body[GIOSHUXING.searchType_var]=searchTypeGio;    body[GIOSHUXING.contentTitle_var]=title;    body[GIOSHUXING.contentType_var] = contentTypeGio;    gioMessage(GIOSHIJIAN.SearchResultsClick,body);}//浏览实盘比赛选手详情列表function gamePlayerDetailView(type){    var body = {}    body.creator_id_var = topicUserID;    body.creatorName_var = topicUserName;    body.host_var = topicUserName;    body.content_id_var = topicTopicID;    body.contentTitle_var = topicSubject;    if(type == 2){        body.status_var = "比赛中";    }else if(type == 1){        body.status_var = "报名中";    }else if(type == 3){        body.status_var = "已结束";    }else {        bpdy.status_var = "-";    }    gioMessage('gamePlayerDetailView',body);}//实盘查看战绩function lookSpMatchRecordGIO(flag) {    var body = {}    if ("B" === flag) {        body.entryPage_var = "个人博客实盘比赛";    } else if ("S" === flag) {        body.entryPage_var = "实盘比赛选手列表页";    } else if ("F" === flag) {        body.entryPage_var = "实盘风云选手榜";    }    body.entryFunction_var = "查看战绩";    gioMessage('gamePlayerDetailView', body);}//Gio 作者删除智能选股留言function deleteDvMessage(obj){    var body = {};    var data = $(obj).parent().parent().find(".lyInfoHr");    var dvUserID = $(data).find(".dvUserID").val();    body.user_id_var = $(data).find(".lyUserID").val();    var data = getFansLevel(dvUserID, body.user_id_var);    var fansLevel = data.fansRankName;    if(fansLevel == "-"){        body.userStatus_var = "非粉丝";        body.userLevel_var = "-";    }else{        body.userStatus_var = "粉丝";        body.userLevel_var = fansLevel;    }    body.content_id_var = $(data).find(".viewPointSeq").val();    body.contentTitle_var = $(data).find(".dvSubject").val();    body.money_amount_var = $(data).find(".dvMoney").val();    gioMessage("deleteMessage", body);}//Gio 工具箱/审核 删除智能选股留言function deleteDvMessageNew(userID, seq, subject, money){    var body = {};    body.user_id_var = userID;    body.userStatus_var = "-";    body.userLevel_var = "-";    body.content_id_var = seq;    body.contentTitle_var = subject;    body.money_amount_var = money;    gioMessage("deleteMessage", body);}//Gio 搜索热度/高级搜索function headerSearch(i) {    if(i == 1){        gioMessage("hotSearchClick");    }else if(i == 2){        gioMessage("highSearchClick");    }}//Gio 在搜索热度下搜索成功function hotSearchSuccess(i, searchType){    var body = {};    body.ifSearchResult_var = "有";    body.searchWord_var = searchType;    if(i == 1){        body.searchType_var = "实时个股";    }else if(i == 2){        body.searchType_var = "24小时个股";    }else if(i == 3){        body.searchType_var = "24小时用户";    }else if(i == 4){        body.searchType_var = "24小时热门主题投资";    }else{        body.searchType_var = "-";    }    gioMessage("hotSearchSuccess", body);}//内容发布提交function gioReleaseContentClick(id, title, type, contentType, status, reason, shareNum, isValid, publishMethod, referer,talkName,talkType) {    var body = {};    if (referer == '-') {        referer = getReferrerName()    } else {        referer = urlPageName(referer)    }    var contentType_var = "-";    var releaseType = "主帖";    if (type == 'R') {        releaseType = "跟帖";    }else if (type == 'znxg'||type == 'T') {        releaseType = "主帖";    }else if (type == 'S') {        releaseType = "说说";    } else if (type == 'V') {        releaseType = "视频";    }    if (status == 'S') {        status = '成功';    } else {        status = '异常中断'    }    if (isValid == 'Y') {        isValid = '是';    } else if (isValid == 'N') {        isValid = '否'    }    if (publishMethod == 'Y') {        publishMethod = '原创发布';    } else if (publishMethod == 'N') {        publishMethod = '转帖发布';    }    if (title.length > 50) {        title = title.substring(0, 50);    }    body[GIOSHUXING.content_id_var] = id;    body[GIOSHUXING.contentTitle_var] = title;    body[GIOSHUXING.releaseType_var] = releaseType;    if (type == 'R') {        body[GIOSHUXING.contentType_var] = "跟帖";    }else  if (type == 'S') {        body[GIOSHUXING.contentType_var] = "说说";    }else  if (type == '') {        body[GIOSHUXING.contentType_var] = "视频";    }else  if (type == 'znxg') {        body[GIOSHUXING.contentType_var] = "智能选股";    }else{        body[GIOSHUXING.contentType_var] = getContentType(contentType);    }    body[GIOSHUXING.releaseStatus_var] = status;    body[GIOSHUXING.releaseFailReason_var] = reason;    body[GIOSHUXING.shares_num_var] = shareNum;    body[GIOSHUXING.entryPage_var] = referer;    body[GIOSHUXING.entryFunction_var] = "-";    body[GIOSHUXING.ifValid_var] = isValid;    body[GIOSHUXING.publishMethod_var] = publishMethod;    //gio添加传话题名称    if ('' == talkName || undefined == talkName || null == talkName || '-' == talkName){        body[GIOSHUXING.talkName_var] = "-";        body[GIOSHUXING.topicPageType_var] = "-";    }else {        body[GIOSHUXING.talkName_var] = talkName;        //话题类型        if ('' == talkType || undefined == talkType || null == talkType){            body[GIOSHUXING.topicPageType_var] = "普通话题";        }else if (talkType == "7"){            body[GIOSHUXING.topicPageType_var] = "研股比赛";        }else if (talkType == "8"){            body[GIOSHUXING.topicPageType_var] = "活动话题";        }else {            body[GIOSHUXING.topicPageType_var] = "普通话题";        }    }    console.log(body);    gioMessage(GIOSHIJIAN.releaseContentClick, body);}//成功关注function gioFollowSuccess(friend_name, loginUserID, type){    var path = window.location.href;    $.ajax({        type: 'GET',        url: "/user/getUserByName",        data: {userName: friend_name, fansID: loginUserID},        dataType: 'json',        success: function (data) {            if (data.status) {                var userID = data.dto.userID;                var auth = data.dto.auth;                var body = {};                body.creator_id_var = userID;                body.creatorName_var = friend_name;                if (auth > 54) {                    body.ifBigV_var = "是";                } else {                    body.ifBigV_var = "否";                }                if(path.indexOf("/bbs") != -1){                    body.entryPage_var = "淘股论坛列表页";                    body.entryFunction_var = "淘股论坛";                }else if(path.indexOf("/zongbang") != -1){                    body.entryPage_var = "社区总榜列表页";                    body.entryFunction_var = "社区总榜";                }else if(path.indexOf("/jinghua") != -1){                    body.entryPage_var = "精华加油列表页";                    body.entryFunction_var = "精华加油";                }else if(path.indexOf("/dianzan") != -1){                    body.entryPage_var = "网友点赞列表页";                    body.entryFunction_var = "网友点赞";                }else if(path.indexOf("/ttcl") != -1){                    body.entryPage_var = "婷婷春雷列表页";                    body.entryFunction_var = "婷婷春雷";                }else if(path.indexOf("/a") != -1){                    body.entryPage_var = "主帖";                    body.entryFunction_var = "关注按钮";                }else if(path.indexOf("/dialog") != -1){                    body.entryPage_var = "跟帖讨论";                    body.entryFunction_var = "关注按钮";                }else if(path.indexOf("/follow") != -1){                    body.entryPage_var = "精彩跟帖";                    body.entryFunction_var = "关注按钮";                }else if(path.indexOf("/shuoindex") != -1){                    body.entryPage_var = "说说列表";                    body.entryFunction_var = "关注按钮";                }else if(path.indexOf("/shuohot") != -1){                    body.entryPage_var = "说说热门点赞";                    body.entryFunction_var = "关注按钮";                }else if(path.indexOf("/toViewShuo") != -1){                    body.entryPage_var = "说说详情";                    body.entryFunction_var = "关注按钮";                }else if(path.indexOf("/blog") != -1){                    body.entryPage_var = "个人博客";                    body.entryFunction_var = "关注按钮";                }else if(path.indexOf("/spefocus") != -1){                    body.entryPage_var = "关注管理";                    body.entryFunction_var = "关注管理";                }else if(path.indexOf("/getFriendRelation") != -1){                    body.entryPage_var = "关系管理";                    body.entryFunction_var = "关系管理";                }else if(path.indexOf("/search") != -1 || path.indexOf("/mSearch") != -1){                    body.entryPage_var = "搜索";                    body.entryFunction_var = "搜索";                }else{                    body.entryPage_var = "-";                    body.entryFunction_var = "-";                }                body.followType_var = type;                gioMessage(GIOSHIJIAN.followSuccess, body);            }        }    });}//收藏成功function gioCollectSuccess(topicID, userID, colDatas,type){    var fansData = getFansLevel(userID, loginUserID);    if(topicID == 0){        for (var i = 0; i < colDatas.length; i++) {            var topicDatas = colDatas[i].split("_");            topicID = topicDatas[0];            var userName = $("#topic_"+topicID).attr("username");            var subject = $("#topic_"+topicID).attr("subject");            gioCollectSuccessSend(topicID, userID, fansData, userName, subject,type);        }    }else{        gioCollectSuccessSend(topicID, userID, fansData, '', '',type);    }}function gioCollectSuccessSend(topicID, userID, fansData, userName, subject,type){    if(userName == ''){        userName = topicUserName;    }    if(subject == ''){         subject = topicSubject;    }    var body = {};    body.creator_id_var = userID;    body.creatorName_var = userName;    body.content_id_var = topicID;    if(type == 1){        body.contentType_var = "研股";    }else if(type == 2){        body.contentType_var = "复盘";    }else if(type == 3){        body.contentType_var = "实盘";    }else if(type == 4){        body.contentType_var = "方法论";    }else if(type == 5){        body.contentType_var = "其他";    }else{        body.contentType_var = "主帖";    }    body.contentTitle_var = subject;    if(fansData.fansLevel != ""){        body.userStatus_var = "粉丝";        body.userLevel_var = fansData.fansRankName;    }else{        body.userStatus_var = "非粉丝";        body.userLevel_var = "-";    }    gioMessage(GIOSHIJIAN.collectSuccess, body);}function getContentType(contentType) {    var contentType_var = "-";    if (contentType == 1) {        contentType_var = "研股";    } else if (contentType == 2) {        contentType_var = "复盘";    } else if (contentType == 3) {        contentType_var = "实盘";    } else if (contentType == 4) {        contentType_var = "方法论";    } else if (contentType == 5) {        contentType_var = "其他";    }  else if (contentType == 6) {        contentType_var = "可转债";    }    return contentType_var;}function gioCommentSuccess(rType,contentID,replyID,userID,userName,content) {    var body = getContentBody(rType,contentID)    Object.assign(body, getFansData(body[GIOSHUXING.creator_id_var],loginUserID));    content = content.replace(/<[^<>]+>/g, "").replace("[淘股吧]", "").replace(/(^\s*)|(\s*$)/g, "");    content = content.replace("[gubar]", "").replace("[/gubar]", "");    if (content.length > 50) {        content = content.substring(0, 50);    }    body[GIOSHUXING.discuss_id_var] = replyID;    body[GIOSHUXING.discussCreator_id_var] = userID;    body[GIOSHUXING.discussCreator_name_var] = userName;    body[GIOSHUXING.discuss_title_var] = content;    gioMessage(GIOSHIJIAN.commentSuccess, body);}/** * 获取埋点所需基本参数 */function getContentBody(rType, contentID,isList) {    var body = {};    body[GIOSHUXING.creator_id_var] = "-";    body[GIOSHUXING.creatorName_var] = "-";    body[GIOSHUXING.content_id_var] = contentID;    body[GIOSHUXING.contentType_var] = "-";    body[GIOSHUXING.contentTitle_var] = "-";    var id;    var contentType;    var sType = "-";    if (rType == "T") {        id = "#gioMsg";        if (isList != undefined && isList == "Y"){            id = "#gioMsg_T_"+contentID;        }        body[GIOSHUXING.creator_id_var] = $(id).attr('userid');        body[GIOSHUXING.creatorName_var] = $(id).attr('username');        body[GIOSHUXING.contentTitle_var] = $(id).attr('subject');        contentType = $(id).attr('type');    }    if (rType == "S" || rType == "CLS") {        if (contentID != "_") {            id = "#gioMsg_S_" + contentID;            body[GIOSHUXING.creator_id_var] = $(id).attr('userid');            body[GIOSHUXING.creatorName_var] = $(id).attr('username');            body[GIOSHUXING.contentTitle_var] = $(id).attr('subject');            contentType = $(id).attr('type');            sType = $(id).attr('stype');        }    }    if (rType == "R") {        id = "#gioMsg_R_" + contentID;        body[GIOSHUXING.creator_id_var] = $(id).attr('userid');        body[GIOSHUXING.creatorName_var] = $(id).attr('username');        body[GIOSHUXING.contentTitle_var] = $(id).attr('subject');    }    if (rType == 'NGB') {        body[GIOSHUXING.creator_id_var] = $('.ngbBuy').attr("data-userid");        body[GIOSHUXING.creatorName_var] = $('.ngbBuy').attr('data-username');        body[GIOSHUXING.contentTitle_var] = '精选 · ' + [GIOSHUXING.creatorName_var] + ' ' + $('.ngbBuy').attr('data-time') + '(' + $('.ngbBuy').attr('data-period') + ')';    }    if (rType == 'DV') {        body[GIOSHUXING.creator_id_var] = $('.payMore').attr("data-userid");        body[GIOSHUXING.creatorName_var] = $('.payMore').attr('data-username');        body[GIOSHUXING.contentTitle_var] = $('.payMore').attr('data-title');    }    if (rType == 'FEEDS') {        body[GIOSHUXING.creator_id_var] = $('.stockviewgio').attr("data-feedsid");        body[GIOSHUXING.creatorName_var] = $('.stockviewgio').attr('data-feedsname');        body[GIOSHUXING.contentTitle_var] = $('.stockviewgio').attr('data-title');        body[GIOSHUXING.money_amount_var] = $('.stockviewgio').attr('data-money');        contentType ="策略参考";    }    //课程    if (rType == "COURSE"){        body[GIOSHUXING.creator_id_var] = $('.stockviewgio').attr("data-creatid");        body[GIOSHUXING.creatorName_var] = $('.stockviewgio').attr('data-username');        body[GIOSHUXING.contentTitle_var] =$('.stockviewgio').attr('data-title');        body[GIOSHUXING.contentType_var] = "课程";    }    //训练营    if (rType == "TRAIN"){        body[GIOSHUXING.creator_id_var] = $('.traincampgio').attr("data-campid");        body[GIOSHUXING.creatorName_var] = $('.traincampgio').attr("data-campname");        body[GIOSHUXING.contentTitle_var] =$('.traincampgio').attr("data-title");        body[GIOSHUXING.contentType_var] = "训练营";    }    contentType = getContentType(contentType);    if (sType != "-") {        contentType = "说说"        if (sType == "LIVE") {            contentType = "直播"        }        if (sType == "VIDEO") {            contentType = "视频"        }        if (sType == "CLS") {            contentType = "极速快讯"        }        if (sType == "P") {            contentType = "说说回复"        }    }    if(contentType != "-"){        body[GIOSHUXING.contentType_var] = contentType;    }    return body;}function getFansData(userID,fansID){    var body = {};    var fans = getFansLevel(userID,fansID);    body[GIOSHUXING.userStatus_var] = '粉丝';    if (fans.fansRankName == '-') {        body[GIOSHUXING.userStatus_var] = '非粉丝';    }    body[GIOSHUXING.userLevel_var] = fans.fansRankName;    return body;}function gioLikeSuccess(contentID, rType, source,topicID) {    var body = {};    if (source == "L") {        source = "-";        body = getContentBody(rType, contentID, "Y");    } else {        body = getContentBody(rType, contentID);    }    if (source != "-") {        if (rType == "T") {            body[GIOSHUXING.likeEntry_var] = "导航底部";        }        if (rType == "R") {            body[GIOSHUXING.likeEntry_var] = "跟帖";        }        if (rType == "S") {            body[GIOSHUXING.likeEntry_var] = "说说";        }        if (rType == "LIVE") {            body[GIOSHUXING.likeEntry_var] = "直播";        }        if (rType == "VIDEO") {            body[GIOSHUXING.likeEntry_var] = "视频";        }    } else {        body[GIOSHUXING.likeEntry_var] = getCurrentName()    }    if (rType == "R") {        body[GIOSHUXING.discuss_id_var] = contentID;        body[GIOSHUXING.discuss_title_var] = body[GIOSHUXING.contentTitle_var];        body[GIOSHUXING.discussCreator_id_var] = body[GIOSHUXING.creator_id_var];        body[GIOSHUXING.discussCreator_name_var] = body[GIOSHUXING.creatorName_var];        var id = "#gioMsg";        if (source == "L") {            id = "#gioMsg_T_" + topicID + "_" + contentID;        }        body[GIOSHUXING.creator_id_var] = $(id).attr('userid');        body[GIOSHUXING.creatorName_var] = $(id).attr('username');        body[GIOSHUXING.contentTitle_var] = $(id).attr('subject');    }else {        body[GIOSHUXING.discuss_id_var] = "-";        body[GIOSHUXING.discuss_title_var] = "-";        body[GIOSHUXING.discussCreator_id_var] = "-";        body[GIOSHUXING.discussCreator_name_var] = "-";    }    Object.assign(body, getFansData(body[GIOSHUXING.creator_id_var], loginUserID));    gioMessage(GIOSHIJIAN.likeSuccess, body);}function gioSearch(type,searchWord,key,path) {    // clickSearch();    if (type == 1){        if (searchWord.length > 2 && key.length < 2){            key = searchWord;        }        gioDirectSearchSuccess('Y',2,searchWord);        window.open(path+'search/search?searchContent='+key+'&type=2');    }else if (type ==2){        gioDirectSearchSuccess('Y',2,searchWord);        window.open(path+'search/search?searchContent='+key+'&type=10');    }else if (type == 3){        gioDirectSearchSuccess('Y',2,searchWord);        //window.open(path+'fund/' + key );        window.open(path+'search/search?searchContent='+key+'&type=11');    }}function asyncFun(url, data, fun) {    $.ajax({        url : url, // 请求的url地址        dataType : "json", // 返回格式为json        async : true, // 请求是否异步，默认为异步，这也是ajax重要特性        data : data, // 参数值        type : "POST", // 请求方式        beforeSend : function() {            // 请求前的处理        },        success : fun,        complete : function() {            // 请求完成的处理        },        error : function() {            // 请求出错处理        }    });}//触发搜索次数采集，次数满了后，触发登录// function clickSearch(){//     var data={};//     asyncFun("/search/countClick",data,function(){////     })// }//m端点击搜索埋点function gioSearchSuccess(type,key) {    var body = {};    if (type == 1){        body.searchType_var = "主动搜索"    }    body.searchWord_var=key;    body.ifSearchResult_var = "有"    gioMessage(GIOSHIJIAN.searchSuccess,body)}//删除/修改/下架策略function gioUpdStrategyMessage(userID, seq, title, type, money, action) {    var feedsType="N";    $.ajax({        type: "GET",//方法类型        dataType: "json",//预期服务器返回的数据类型        url:"/feeds/getFeedsTypeBySeq" ,//url        data: {seq:seq},        async:false,        success: function (result) {            if(result.status){                feedsType = result.dto;                return;            }        },        error : function() {            alert("出现异常！");        }    });    var body = {};    body.user_id_var = userID;    body.content_id_var = seq;    if("Y" == feedsType){        body.contentType_var = "金策";    } else {        body.contentType_var = type;    }    body.contentTitle_var = title;    body.businessType_var = title;    body.money_amount_var = money;    gioMessage(action, body);}//帖子页面图片缩放function compressImg(obj, width){    if(obj.width > obj.height && obj.width > 760){        obj.width = 760;    }else if(obj.width <= obj.height && obj.width > 460){        obj.width = 460;    }}function gioSelectStrategyPageView() {    var body = {};    var url = window.location.href;    if (url.indexOf("/feeds/qryFeedsViewPointView") > -1) {        body[GIOSHUXING.entryPage_var] = "导航栏"        body[GIOSHUXING.entryFunction_var] = "策略参考"    } else if (url.indexOf("/user/center/message/davMsg")) {        body[GIOSHUXING.entryPage_var] = "消息中心"        body[GIOSHUXING.entryFunction_var] = "策略参考"    }    gioMessage(GIOSHIJIAN.selectStrategyPageView, body);}function getMReferrerName(){    var ref = document.referrer;    var source = '主页';    if (ref.indexOf("/mNewCenter") > -1) {        source = '主页';    }    if (ref.indexOf("/a") > -1) {        source = '主帖页';    }    if (ref.indexOf("/dialog") > -1) {        source = '跟帖讨论';    }    if (ref.indexOf("/follow") > -1) {        source = '精彩跟帖';    } if (ref.indexOf("/mCenter") > -1) {        source = '个人动态';    }if (ref.indexOf("/mVideoIndex") > -1) {        source = '视频列表';    }if (ref.indexOf("/mVideoView") > -1) {        source = '视频页';    }if (ref.indexOf("/quotes") > -1) {        source = '热股';        if (ref.indexOf("/hk") > -1||ref.indexOf("/sh") > -1||ref.indexOf("/sj") > -1||ref.indexOf("/bj") > -1) {            source = '个股吧';        }    }if (ref.indexOf("/kzz/mKzz") > -1) {        source = '可转债';    }    if (ref.indexOf("/fund") > -1) {        source = '基金';    }    source = "M"+source    return source}function gioMLoginSuccess(type){    var body = {};    if (type ==1){        body[GIOSHUXING.registerType_var]='账号密码登录'    }else {        body[GIOSHUXING.registerType_var]='短信登录'    }    body[GIOSHUXING.entryPage_var]=getMReferrerName();    body[GIOSHUXING.entryFunction_var]='登录'    body[GIOSHUXING.ifFirstLogin_var]='否'    gioMessage(GIOSHIJIAN.loginSuccess, body);}function gioSearchResultsClick(key,type) {    var body={};    body.searchWord_var = key;    if(type == 1){        body.searchType_var ="股票"    }else if (type == 2){        body.searchType_var = "用户"    }else if(type ==3){        body.searchType_var = "股票"    }else {        body.searchType_var = "综合"    }    gioMessage(GIOSHIJIAN.searchResultsClick,body)}function gioBondPageView(){    var body={};    body[GIOSHUXING.entryPage_var]=getReferrerName();    body[GIOSHUXING.entryFunction_var]="可转债"    gioMessage(GIOSHIJIAN.bondPageView,body)}function gioMLikeSuccess(msgType,rid,type,entry) {    var body = {};    if (msgType == "gt" || msgType == "lt"){        var id = "#"+msgType+"gioMsg"+rid;    }else{        var id = "#"+msgType+"gioMsg";    }    body[GIOSHUXING.creator_id_var] = loginUserID;    body[GIOSHUXING.creatorName_var] = $(id).attr('username');    body[GIOSHUXING.content_id_var] = $(id).attr('contentid');    body[GIOSHUXING.contentType_var] = type    var content = $(id).attr('subject');    content = content.replace(/<[^<>]+>/g, "").replace("[淘股吧]", "").replace(/(^\s*)|(\s*$)/g, "");    content = content.replace("[gubar]", "").replace("[/gubar]", "");    if (content.length > 50) {        content = content.substring(0, 50);    }    body[GIOSHUXING.contentTitle_var] = content;    if (entry == "zw"){        body[GIOSHUXING.likeEntry_var] = "正文底部";    }else if(entry == "dh"){        body[GIOSHUXING.likeEntry_var] = "导航底部";    }    if (loginUserID == '0' || loginUserID == null){        body[GIOSHUXING.userStatus_var] = "游客";    }else{        Object.assign(body, getFansData($(id).attr('userid'), loginUserID));    }    gioMessage(GIOSHIJIAN.likeSuccess, body);}function gioMCommentSuccess(msgType,userID,username,contentId,type,title) {    var body = getContentBody("T",contentId)    title = title.replace(/<[^<>]+>/g, "").replace("[淘股吧]", "").replace(/(^\s*)|(\s*$)/g, "");    title = title.replace("[gubar]", "").replace("[/gubar]", "");    if (title.length > 50) {        title = title.substring(0, 50);    }    body[GIOSHUXING.contentType_var] = '主帖';    body[GIOSHUXING.discuss_id_var] = $("#gioMsg").attr("replyID");    body[GIOSHUXING.discussCreator_id_var] = loginUserID;    body[GIOSHUXING.discussCreator_name_var] = username;    body[GIOSHUXING.discuss_title_var] = $("#content_body").val();    if (loginUserID == '0' || loginUserID == null){        body[GIOSHUXING.userStatus_var] = "游客";    }else{        Object.assign(body, getFansData(body[GIOSHUXING.creator_id_var], loginUserID));    }    gioMessage(GIOSHIJIAN.commentSuccess, body);}//策略参考点击订阅按钮function strategyClickButtonSubscribe(type){    var body = {}    var creatorID = $('.stockviewgio').attr("data-feedsid");    var userID = $('.stockviewgio').attr("data-userid");    body.creator_id_var = $('.stockviewgio').attr("data-feedsid");    body.creatorName_var = $('.stockviewgio').attr("data-feedsname");    body.content_id_var = $('.stockviewgio').attr("data-contid");    body.contentTitle_var = $('.stockviewgio').attr("data-title");    //粉丝    var data = getFansLevel(creatorID, userID);    var fansLevel = data.fansRankName;    var fansTime = data.followTime;    if(fansLevel == "-"){        body.userStatus_var = "非粉丝";        body.followTime_var = "-"        body.userLevel_var = "-";    }else{        body.userStatus_var = "粉丝";        body.followTime_var = fansTime;        body.userLevel_var = fansLevel;    }    if (type == 'Y'){        body.subscribeType_var = "付费订阅";        body.money_amount_var = $('.stockviewgio').attr("data-money");    }else if (type == 'F'){        body.subscribeType_var = "免费订阅";        body.money_amount_var = 0;    }    console.log(body)    gioMessage(GIOSHIJIAN.strategyClickButtonSubscribe,body);}function gioApplyGameSuccess(seq) {    var body = {}    body.content_id_var = seq;    body.contentTitle_var = $('#gioMsg').attr("subject");    body.host_var = $('#gioMsg').attr("username");    gioMessage(GIOSHIJIAN.applyGameSuccess,body)}//PC直播gio -- start//浏览直播列表function livePageView() {    var body = {}    body.entryPage_var = "PC直播列表页";    body.entryFunction_var = "进入PC直播列表页";    gioMessage("livePageView", body);}//预约直播成功function appointmentSuccess(data, entryPage, entryFunction) {    var body = {}    body.entryPage_var = entryPage;    body.entryFunction_var = entryFunction;    body.creator_id_var = data.userID;    body.creatorName_var = data.userName;    body.content_id_var = data.seq;    body.contentTitle_var = data.title;    body.userStatus_var = data.fansStatus;    body.userLevel_var = data.fansLevelStr;    gioMessage("appointmentSuccess", body);}//成功进入直播间function enterLiveRoomSuccess(data){    data.entryPage_var = getReferrerName();    data.entryFunction_var = "进入直播间";    var fansData = getFansLevel(loginUserID, data.creator_id_var);    var fansLevel = fansData.fansRankName;    if(fansLevel == "-"){        data.userStatus_var = "非粉丝";        data.userLevel_var = "-";    }else{        data.userStatus_var = "粉丝";        data.userLevel_var = fansLevel;    }    gioMessage("enterLiveRoomSuccess", data);}//离开直播间function leaveLiveRoomSuccess(data){    data.contentType_var = "直播";    var fansLevel = "-";    $.ajax({ //退出不能同步获取粉丝，只能异步        type:'get',        url: "/user/getFansLevel",        data:{"userID":loginUserID,"fansID":data.creator_id_var},        dataType: 'json',        success:function (res){            if(res.status){                if (res.dto.fansLevel == "Lv1"){                    fansLevel = "普通粉丝";                    data.userStatus_var = "粉丝";                }else if (res.dto.fansLevel == "Lv2"){                    fansLevel = "银粉";                    data.userStatus_var = "粉丝";                }else if (res.dto.fansLevel == "Lv3"){                    fansLevel = "金粉";                    data.userStatus_var = "粉丝";                }else {                    data.userStatus_var = "非粉丝";                }                data.userLevel_var = fansLevel;                gioMessage("leaveLiveRoomSuccess", data);            }        }    });}//PC直播gio -- end//课程简介页面浏览giofunction gioCourseIntroductionView(userID,username,contentId,title,money) {    var body = {}    body.creator_id_var = userID;    body.creatorName_var = username;    body.content_id_var = contentId;    body.contentTitle_var = title;    body.money_amount_var = money;    body.entryPage_var = getReferrerName();    body.entryFunction_var = "--";    gioMessage(GIOSHIJIAN.courseIntroductionView, body);}//点击【订阅】按钮-课程function gioCourseClickButtonSubscribe(){    var contID = $('.stockviewgio').attr("data-contid");    var creatorID = $('.stockviewgio').attr("data-feedsid");    var userID = $('.stockviewgio').attr("data-userid");    var body = {}    body.creator_id_var = userID;    body.creatorName_var = $('.stockviewgio').attr("data-feedsname");    body.content_id_var = contID;    body.contentTitle_var = $('.stockviewgio').attr("data-title");    var data = getFansLevel(creatorID,userID);    var fansLevel = data.fansRankName;    var fansTime = data.followTime;    if(fansLevel == "-"){        body.userStatus_var = "非粉丝";        body.followTime_var = "-"        body.userLevel_var = "-";    }else{        body.userStatus_var = "粉丝";        body.followTime_var = fansTime;        body.userLevel_var = fansLevel;    }    body.subscribeType_var = "付费订阅";    body.money_amount_var = $('.stockviewgio').attr("data-money");    gioMessage(GIOSHIJIAN.courseClickButtonSubscribe,body);}function gioCourseClickButtonSubscribeFree(){    var contID = $('.stockviewgio').attr("data-contid");    var creatorID = $('.stockviewgio').attr("data-feedsid");    var userID = $('.stockviewgio').attr("data-userid");    var body = {}    body.creator_id_var = userID;    body.creatorName_var = $('.stockviewgio').attr("data-feedsname");    body.content_id_var = contID;    body.contentTitle_var = $('.stockviewgio').attr("data-title");    var data = getFansLevel(creatorID,userID);    var fansLevel = data.fansRankName;    var fansTime = data.followTime;    if(fansLevel == "-"){        body.userStatus_var = "非粉丝";        body.followTime_var = "-"        body.userLevel_var = "-";    }else{        body.userStatus_var = "粉丝";        body.followTime_var = fansTime;        body.userLevel_var = fansLevel;    }    body.payType_var = "0元购";    body.subscribeType_var = "付费订阅";    body.money_amount_var = $('.stockviewgio').attr("data-money");    gioMessage(GIOSHIJIAN.courseClickButtonSubscribe,body);}//课程首次订阅时，提交身份认证成功时触发function gioCourseAuthenticationSuccess(contentID,money,userID) {    var contentTitle = "-";    var creatorID = "-";    var creatorName = "-";    var contentID = contentID;    creatorID = $('.stockviewgio').attr("data-feedsid");    creatorName = $('.stockviewgio').attr("data-feedsname");    contentTitle = $('.stockviewgio').attr("data-title");    var body={}    //粉丝    var data = getFansLevel(creatorID, userID);    var fansLevel = data.fansRankName;    var fansTime = data.followTime;    if(fansLevel == "-"){        body[GIOSHUXING.userStatus_var] = "非粉丝";        body[GIOSHUXING.followTime_var] = "-"        body[GIOSHUXING.userLevel_var] = "-";    }else{        body[GIOSHUXING.userStatus_var] = "粉丝";        body[GIOSHUXING.followTime_var] = fansTime;        body[GIOSHUXING.userLevel_var] = fansLevel;    }    body[GIOSHUXING.creator_id_var]=creatorID;    body[GIOSHUXING.creatorName_var]=creatorName;    body[GIOSHUXING.content_id_var]=contentID;    body[GIOSHUXING.contentTitle_var]=contentTitle;    body[GIOSHUXING.money_amount_var]=money;    body[GIOSHUXING.subscribeType_var]="付费订阅";    gioMessage(GIOSHIJIAN.courseAuthenticationSuccess,body);}function gioUserLabelScreenView(label){    var body={}    var userID= '-';    var userName= '-';    var page = getCurrentName();    if (page=='主帖页'){        userID = $('.topicviewgio').attr('data-userid')        userName =  $('.topicviewgio').attr('data-username')    }else if (page == '个人博客'){        userID = $('.gioMsg').attr('data-userid')        userName =  $('.gioMsg').attr('data-username')    }else {        page = window.location.href;    }    body[GIOSHUXING.entryPage_var]= page    body[GIOSHUXING.entryFunction_var]="筛选标签";    body[GIOSHUXING.userLabelName_var]=label;    body[GIOSHUXING.creator_id_var]=userID;    body[GIOSHUXING.creatorName_var]=userName;    gioMessage(GIOSHIJIAN.userLabelScreenView,body);}function gioSpeedReportClick(){    var body={}    body[GIOSHUXING.entryPage_var]= "我的比赛"    body[GIOSHUXING.entryFunction_var]="极速报单"    gioMessage(GIOSHIJIAN.speedReportClick,body);}function gioCompletePictureRecognition(type) {    var recognitionResults = {        0: "识别成功",        1: "识别不完整但有数值",        2: "无法识别且无数值"    };    var recognitionResult = recognitionResults[type] || "未知结果";    var body = {};    body[GIOSHUXING.pictureRecognitionResult_var] = recognitionResult;    gioMessage(GIOSHIJIAN.completePictureRecognition, body);}function gioConfirmSubmissionReport(totalMoney,position,stockInfo) {    if (stockInfo.length === 2) {        stockInfo = "空仓";    }    var body = {};    body[GIOSHUXING.totalAssets_var] = totalMoney;    body[GIOSHUXING.stockPosition_var] = position+"%";    body[GIOSHUXING.openStock_var] = stockInfo;    gioMessage(GIOSHIJIAN.confirmSubmissionReport, body);}function gioStockEntryWarning(Rate,todayMoney,preMoney) {    var body = {};    body[GIOSHUXING.stockYield_var] = Rate+"%";    body[GIOSHUXING.totalAssetsToday_var] = todayMoney;    body[GIOSHUXING.totalAssetesYesterday_var] = preMoney;    gioMessage(GIOSHIJIAN.stockEntryWarning, body);}function gioSubmitWarningForm(type) {    var submit;    if (type == 1){        submit ="确认提交";    }else {        submit = "返回";    }    var body = {};    body[GIOSHUXING.typeOfOperation_var] = submit;    gioMessage(GIOSHIJIAN.submitWarningForm, body);}function clickGeGuBaGIO(flag) {    var body = {}    if ("T" === flag) {        body[GIOSHUXING.entryPage_var] = "实盘首页";    } else {        body[GIOSHUXING.entryPage_var] = "实盘战绩页";    }    body[GIOSHUXING.entryFunction_var] = "进入个股吧";    gioMessage(GIOSHIJIAN.individualSharesView, body);}function gioPersonalColumnsPageView(referer,type){    var body = {};    if (referer == '-') {        referer = getReferrerName()    } else {        referer = urlPageName(referer)    }    body[GIOSHUXING.entryPage_var] = referer;    body[GIOSHUXING.entryFunction_var] = "-";    if(referer == '训练营列表' || referer == '我的订阅'){        body[GIOSHUXING.entryFunction_var] = "训练营";    }else if(referer == '训练营列表' || referer == '我的订阅') {        body[GIOSHUXING.entryFunction_var] = "个人专栏";    }    var subMenu = "专栏介绍"    if (type == 1){        subMenu = '金策'    }else if (type == 2){        subMenu = '训练营'    }else if (type == 3){        subMenu = '课程'    }else if (type == 4 || type == 0){        subMenu = '专栏动态'    }    body[GIOSHUXING.submenurName_var] = subMenu;    gioMessage(GIOSHIJIAN.personalColumnsPageView, body);}function gioTrainingContentView(seq) {    var body=gioTrainBody(seq)    delete body[GIOSHUXING.userStatus_var];    body[GIOSHUXING.entryPage_var]=getReferrerName();    body[GIOSHUXING.entryFunction_var]="训练营";    gioMessage(GIOSHIJIAN.trainingContentyView,body);}function gioTrainingClickButtonSubscribe(seq){    var body=gioTrainBody(seq)    gioMessage(GIOSHIJIAN.trainingClickButtonSubscribe,body);}function gioTrainingAuthenticationSuccess(seq){    var body=gioTrainBody(seq)    gioMessage(GIOSHIJIAN.trainingAuthenticationSuccess,body);}function gioTrainingClearanceAgreementSuccess(seq){    var body=gioTrainBody(seq)    gioMessage(GIOSHIJIAN.trainingClearanceAgreementSuccess,body);}function gioTrainingPayButtonClick(seq,payType,buyType){    var body=gioTrainBody(seq)    if (payType == 'T'){        body[GIOSHUXING.payType_var]="支付宝";    }else {        body[GIOSHUXING.payType_var]="微信";    }    if (buyType == 'J'){        body[GIOSHUXING.buyType_var]="训练营包季";    }else {        body[GIOSHUXING.buyType_var]="训练营包月";    }    gioMessage(GIOSHIJIAN.trainingPayButtonClick,body);} function gioTrainBody(seq){    var cl = ".gioViewTrain_"+seq;     var contentTitle = "-";     var creatorID = "-";     var creator = "-";     var money =  "-";     var contentID = "-";     var userID = $("#userID").val();     creatorID = $(cl).attr("data-userID");     creator = $(cl).attr("data-userName");     contentTitle = $(cl).attr("data-title");     money = $(cl).attr("data-money");     contentID = seq;     var body={}     //粉丝     var data = getFansLevel(creatorID, userID);     var fansLevel = data.fansRankName;     var fansTime = data.followTime;     if(fansLevel == "-"){         body[GIOSHUXING.userStatus_var] = "非粉丝"         body[GIOSHUXING.followTime_var] = "-"         body[GIOSHUXING.userLevel_var] = "-";     }else{         body[GIOSHUXING.userStatus_var] = "粉丝"         body[GIOSHUXING.followTime_var] = fansTime;         body[GIOSHUXING.userLevel_var] = fansLevel;     }     body[GIOSHUXING.creator_id_var]=creatorID;     body[GIOSHUXING.creatorName_var]=creator;     body[GIOSHUXING.content_id_var]=contentID;     body[GIOSHUXING.contentTitle_var]=contentTitle;     body[GIOSHUXING.money_amount_var]=money;     return body; }function electShare() {    var body = {}    body[GIOSHUXING.entryPage_var]=getCurrentName();    body[GIOSHUXING.entryFunction_var] = "2024年度评选";    gioMessage(GIOSHIJIAN.selectionPageView, body);}function liveThiefUser(liveUserID,liveUserName,liveSeq,contentType,contentTitle,userID){    var body = {}    body[GIOSHUXING.creator_id_var]=liveUserID;    body[GIOSHUXING.creatorName_var]=liveUserName;    body[GIOSHUXING.content_id_var]=liveSeq;    body[GIOSHUXING.contentType_var]=contentType;    body[GIOSHUXING.contentTitle_var]=contentTitle;    body[GIOSHUXING.user_id_var]=userID;    gioMessage(GIOSHIJIAN.Voicemeeter, body);}function gioGamePlayerPageView(entryPage,entryFunction,status){    var body={}    body[GIOSHUXING.entryPage_var] = entryPage;    body[GIOSHUXING.entryFunction_var] = entryFunction;    body[GIOSHUXING.status_var] = status;    gioMessage(GIOSHIJIAN.gamePlayerPageView,body);}